
        // Language data
        const translations = {
            en: {
                welcome: "Welcome to SkillNest Services",
                selectLanguage: "Select your preferred language",
                loginOrSignup: "Login or create a new account",
                login: "Login",
                signup: "Sign Up",
                customer: "Customer",
                serviceProvider: "Service Provider",
                learner: "Learner",
                mentor: "Mentor",
                email: "Email ID",
                password: "Password",
                fullName: "Full Name",
                phone: "Phone Number",
                address: "Address",
                bankAccount: "Bank Account Number",
                confirmPassword: "Confirm Password",
                createAccount: "Create Account",
                alreadyHaveAccount: "Already have an account?",
                dontHaveAccount: "Don't have an account?",
                profile: "Profile",
                myReports: "My Reports",
                history: "History",
                jobApplications: "Job Applications",
                myJobs: "My Jobs",
                reviews: "Reviews",
                logout: "Logout",
                reportsApplied: "Reports Applied",
                problemsSolved: "Problems Solved",
                liveChats: "Live Chats",
                rating: "Rating",
                reportProblem: "Report a Problem",
                myServices: "My Services",
                serviceHistory: "Service History",
                editProfile: "Edit Profile",
                submitReport: "Submit Report",
                selectLocation: "Select Location",
                currentLocation: "Current Location",
                manualLocation: "Manual Location",
                emergencyLevel: "Emergency Level",
                paymentMethod: "Payment Method",
                pay50Percent: "Pay 50%",
                menu: "Menu",
                myCourses: "My Courses",
                exams: "Exams",
                students: "Students",
                courses: "Courses",
                back: "Back"
            },
            hi: {
                welcome: "SkillNest सेवाओं में आपका स्वागत है",
                selectLanguage: "अपनी पसंदीदा भाषा चुनें",
                loginOrSignup: "लॉग इन करें या नया खाता बनाएं",
                login: "लॉग इन",
                signup: "साइन अप",
                customer: "ग्राहक",
                serviceProvider: "सेवा प्रदाता",
                learner: "सीखने वाला",
                mentor: "मार्गदर्शक",
                email: "ईमेल आईडी",
                password: "पासवर्ड",
                fullName: "पूरा नाम",
                phone: "फोन नंबर",
                address: "पता",
                bankAccount: "बैंक खाता संख्या",
                confirmPassword: "पासवर्ड की पुष्टि करें",
                createAccount: "खाता बनाएं",
                alreadyHaveAccount: "पहले से ही एक खाता है?",
                dontHaveAccount: "खाता नहीं है?",
                profile: "प्रोफाइल",
                myReports: "मेरी रिपोर्ट",
                history: "इतिहास",
                jobApplications: "नौकरी के आवेदन",
                myJobs: "मेरी नौकरियां",
                reviews: "समीक्षाएं",
                logout: "लॉग आउट",
                reportsApplied: "लागू रिपोर्ट",
                problemsSolved: "हल की गई समस्याएं",
                liveChats: "लाइव चैट",
                rating: "रेटिंग",
                reportProblem: "समस्या की रिपोर्ट करें",
                myServices: "मेरी सेवाएं",
                serviceHistory: "सेवा इतिहास",
                editProfile: "प्रोफाइल संपादित करें",
                submitReport: "रिपोर्ट सबमिट करें",
                selectLocation: "स्थान चुनें",
                currentLocation: "वर्तमान स्थान",
                manualLocation: "मैन्युअल स्थान",
                emergencyLevel: "आपातकालीन स्तर",
                paymentMethod: "भुगतान विधि",
                pay50Percent: "50% भुगतान करें",
                menu: "मेनू",
                myCourses: "मेरे पाठ्यक्रम",
                exams: "परीक्षाएं",
                students: "छात्र",
                courses: "पाठ्यक्रम",
                back: "वापस"
            },
            te: {
                welcome: "SkillNest సేవలకు స్వాగతం",
                selectLanguage: "మీకు నచ్చిన భాషను ఎంచుకోండి",
                loginOrSignup: "లాగిన్ చేయండి లేదా కొత్త ఖాతాను సృష్టించండి",
                login: "లాగిన్",
                signup: "సైన్ అప్",
                customer: "కస్టమర్",
                serviceProvider: "సేవా ప్రదాత",
                learner: "లెర్నర్",
                mentor: "మార్గదర్శకుడు",
                email: "ఇమెయిల్ ఐడి",
                password: "పాస్వర్డ్",
                fullName: "పూర్తి పేరు",
                phone: "ఫోన్ నంబర్",
                address: "చిరునామా",
                bankAccount: "బ్యాంక్ ఖాతా నంబర్",
                confirmPassword: "పాస్వర్డ్ని నిర్ధారించండి",
                createAccount: "ఖాతా సృష్టించు",
                alreadyHaveAccount: "ఇప్పటికే ఖాతా ఉందా?",
                dontHaveAccount: "ఖాతా లేదు?",
                profile: "ప్రొఫైల్",
                myReports: "నా నివేదికలు",
                history: "చరిత్ర",
                jobApplications: "ఉద్యోగ దరఖాస్తులు",
                myJobs: "నా ఉద్యోగాలు",
                reviews: "సమీక్షలు",
                logout: "లాగ్అవుట్",
                reportsApplied: "దరఖాస్తు చేసిన నివేదికలు",
                problemsSolved: "పరిష్కరించిన సమస్యలు",
                liveChats: "లైవ్ చాట్లు",
                rating: "రేటింగ్",
                reportProblem: "సమస్యను నివేదించండి",
                myServices: "నా సేవలు",
                serviceHistory: "సేవా చరిత్ర",
                editProfile: "ప్రొఫైల్ సవరించు",
                submitReport: "నివేదిక సమర్పించండి",
                selectLocation: "స్థానాన్ని ఎంచుకోండి",
                currentLocation: "ప్రస్తుత స్థానం",
                manualLocation: "మాన్యువల్ స్థానం",
                emergencyLevel: "అత్యవసర స్థాయి",
                paymentMethod: "చెల్లింపు పద్ధతి",
                pay50Percent: "50% చెల్లించండి",
                menu: "మెనూ",
                myCourses: "నా కోర్సులు",
                exams: "పరీక్షలు",
                students: "విద్యార్థులు",
                courses: "కోర్సులు",
                back: "వెనక్కి"
            }
        };

        // Current application state
        let currentLanguage = 'en';
        let currentUserType = '';
        let currentUser = null;
        let currentPage = 'profile';
        let previousPage = 'profile';

        // DOM elements
        const languageSelectionScreen = document.getElementById('language-selection');
        const userTypeSelectionScreen = document.getElementById('user-type-selection');
        const authSelectionScreen = document.getElementById('auth-selection');
        const loginScreen = document.getElementById('login-screen');
        const dashboard = document.getElementById('dashboard');
        const reportModal = document.getElementById('report-modal');
        const editProfileModal = document.getElementById('edit-profile-modal');
        
        const languageButtons = document.querySelectorAll('.language-btn');
        const userTypeCards = document.querySelectorAll('.user-type-card');
        const authCards = document.querySelectorAll('.auth-card');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const showSignupLink = document.getElementById('show-signup');
        const showLoginLink = document.getElementById('show-login');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const menuBtn = document.querySelector('.menu-btn');
        const sidebar = document.querySelector('.sidebar');
        const closeBtn = document.querySelector('.close-btn');
        const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
        const logoutBtn = document.getElementById('logout-btn');
        const headerLogoutBtn = document.getElementById('header-logout-btn');
        const languageSwitcherBtn = document.querySelector('.language-switcher-btn');
        const serviceCategories = document.querySelectorAll('.service-category');
        const closeModalBtn = document.querySelectorAll('.close-modal');
        const problemCategorySelect = document.getElementById('problem-category');
        const otherCategoryDiv = document.getElementById('other-category');
        const textToSpeechBtn = document.querySelector('.text-to-speech');
        const currentLocationBtn = document.getElementById('current-location');
        const manualLocationBtn = document.getElementById('manual-location');
        const paymentButtons = document.querySelectorAll('.payment-btn');
        const submitReportBtn = document.getElementById('submit-report');
        const editProfileBtn = document.getElementById('edit-profile-btn');
        const saveProfileBtn = document.getElementById('save-profile-btn');
        const backToLanguageBtn = document.getElementById('back-to-language');
        const backToUserTypeBtn = document.getElementById('back-to-user-type');
        const backToAuthBtn = document.getElementById('back-to-auth');
        const backToPreviousBtn = document.getElementById('back-to-previous');
        const backToProfileBtn = document.getElementById('back-to-profile');
        const selectedUserTypeMessage = document.getElementById('selected-user-type-message');
        const authMessage = document.getElementById('auth-message');

        // Event Listeners
        languageButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove selected class from all language buttons
                languageButtons.forEach(btn => btn.classList.remove('selected'));
                // Add selected class to clicked button
                button.classList.add('selected');
                
                currentLanguage = button.getAttribute('data-lang');
                updateLanguage();
                setTimeout(() => {
                    showScreen(userTypeSelectionScreen);
                }, 300);
            });
        });

        userTypeCards.forEach(card => {
            card.addEventListener('click', () => {
                // Remove selected class from all cards
                userTypeCards.forEach(c => c.classList.remove('selected'));
                // Add selected class to clicked card
                card.classList.add('selected');
                
                currentUserType = card.getAttribute('data-user-type');
                updateSelectedUserTypeMessage();
                setTimeout(() => {
                    showScreen(authSelectionScreen);
                }, 300);
            });
        });

        authCards.forEach(card => {
            card.addEventListener('click', () => {
                // Remove selected class from all cards
                authCards.forEach(c => c.classList.remove('selected'));
                // Add selected class to clicked card
                card.classList.add('selected');
                
                const authType = card.getAttribute('data-auth-type');
                updateAuthMessage(authType);
                setTimeout(() => {
                    showScreen(loginScreen);
                    
                    if (authType === 'login') {
                        loginForm.classList.remove('hidden');
                        signupForm.classList.add('hidden');
                    } else {
                        loginForm.classList.add('hidden');
                        signupForm.classList.remove('hidden');
                        updateUserTypeUI();
                    }
                }, 300);
            });
        });

        // Location selection buttons
        currentLocationBtn.addEventListener('click', () => {
            currentLocationBtn.classList.add('selected');
            manualLocationBtn.classList.remove('selected');
            getCurrentLocation();
        });

        manualLocationBtn.addEventListener('click', () => {
            manualLocationBtn.classList.add('selected');
            currentLocationBtn.classList.remove('selected');
            openManualLocation();
        });

        // Payment selection buttons
        paymentButtons.forEach(button => {
            button.addEventListener('click', () => {
                paymentButtons.forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
            });
        });

        // Service category selection
        serviceCategories.forEach(category => {
            category.addEventListener('click', () => {
                if (currentUserType === 'customer') {
                    serviceCategories.forEach(cat => cat.classList.remove('selected'));
                    category.classList.add('selected');
                    setTimeout(() => {
                        showReportModal(category.getAttribute('data-service'));
                    }, 300);
                }
            });
        });

        // Sidebar menu selection
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                if (link.getAttribute('data-page')) {
                    // Remove active class from all sidebar links
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    // Add active class to clicked link
                    link.classList.add('active');
                    
                    showPage(link.getAttribute('data-page'));
                }
                sidebar.classList.remove('open');
            });
        });

        showSignupLink.addEventListener('click', (e) => {
            e.preventDefault();
            loginForm.classList.add('hidden');
            signupForm.classList.remove('hidden');
            updateUserTypeUI();
        });

        showLoginLink.addEventListener('click', (e) => {
            e.preventDefault();
            signupForm.classList.add('hidden');
            loginForm.classList.remove('hidden');
        });

        loginBtn.addEventListener('click', handleLogin);
        signupBtn.addEventListener('click', handleSignup);

        menuBtn.addEventListener('click', () => {
            sidebar.classList.add('open');
        });

        closeBtn.addEventListener('click', () => {
            sidebar.classList.remove('open');
        });

        logoutBtn.addEventListener('click', handleLogout);
        headerLogoutBtn.addEventListener('click', handleLogout);

        languageSwitcherBtn.addEventListener('click', () => {
            showScreen(languageSelectionScreen);
        });

        closeModalBtn.forEach(btn => {
            btn.addEventListener('click', () => {
                reportModal.classList.add('hidden');
                editProfileModal.classList.add('hidden');
            });
        });

        problemCategorySelect.addEventListener('change', () => {
            if (problemCategorySelect.value === 'other') {
                otherCategoryDiv.style.display = 'block';
            } else {
                otherCategoryDiv.style.display = 'none';
            }
        });

        textToSpeechBtn.addEventListener('click', convertTextToSpeech);

        submitReportBtn.addEventListener('click', submitReport);

        editProfileBtn.addEventListener('click', openEditProfile);
        saveProfileBtn.addEventListener('click', saveProfile);

        backToLanguageBtn.addEventListener('click', () => {
            showScreen(languageSelectionScreen);
        });

        backToUserTypeBtn.addEventListener('click', () => {
            showScreen(userTypeSelectionScreen);
        });

        backToAuthBtn.addEventListener('click', () => {
            showScreen(authSelectionScreen);
        });

        backToPreviousBtn.addEventListener('click', () => {
            showPage(previousPage);
        });

        backToProfileBtn.addEventListener('click', () => {
            showPage('profile');
        });

        // Functions
        function updateLanguage() {
            // Update all text content based on current language
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        }

        function updateSelectedUserTypeMessage() {
            const userTypeText = document.querySelector(`[data-user-type="${currentUserType}"] h3`).textContent;
            selectedUserTypeMessage.textContent = `Welcome, ${userTypeText}!`;
        }

        function updateAuthMessage(authType) {
            const userTypeText = document.querySelector(`[data-user-type="${currentUserType}"] h3`).textContent;
            if (authType === 'login') {
                authMessage.textContent = `Login to your ${userTypeText} account`;
            } else {
                authMessage.textContent = `Create a new ${userTypeText} account`;
            }
        }

        function showScreen(screen) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(s => {
                s.classList.add('hidden');
            });
            // Show the requested screen
            screen.classList.remove('hidden');
        }

        function updateUserTypeUI() {
            // Update signup form based on user type
            const signupTitle = document.getElementById('signup-title');
            
            // Hide all user-specific fields first
            document.getElementById('customer-fields').style.display = 'none';
            document.getElementById('service-fields').style.display = 'none';
            document.getElementById('learner-fields').style.display = 'none';
            document.getElementById('mentor-fields').style.display = 'none';
            
            // Hide all menu types first
            document.querySelectorAll('.sidebar-menu').forEach(menu => {
                menu.style.display = 'none';
            });
            
            // Show appropriate menu based on user type
            document.getElementById(`${currentUserType}-menu`).style.display = 'block';
            
            // Update signup form
            if (currentUserType === 'customer') {
                signupTitle.textContent = 'Create Customer Account';
                document.getElementById('customer-fields').style.display = 'block';
            } else if (currentUserType === 'service') {
                signupTitle.textContent = 'Create Service Provider Account';
                document.getElementById('service-fields').style.display = 'block';
            } else if (currentUserType === 'learner') {
                signupTitle.textContent = 'Create Learner Account';
                document.getElementById('learner-fields').style.display = 'block';
            } else if (currentUserType === 'mentor') {
                signupTitle.textContent = 'Create Mentor Account';
                document.getElementById('mentor-fields').style.display = 'block';
            }
            
            // Update dashboard UI based on user type
            document.getElementById('customer-specific').style.display = 
                currentUserType === 'customer' ? 'block' : 'none';
            document.getElementById('service-specific').style.display = 
                currentUserType === 'service' ? 'block' : 'none';
            document.getElementById('learner-specific').style.display = 
                currentUserType === 'learner' ? 'block' : 'none';
            document.getElementById('mentor-specific').style.display = 
                currentUserType === 'mentor' ? 'block' : 'none';
        }

        function handleLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // Simple validation
            if (!email || !password) {
                alert('Please fill in all fields');
                return;
            }
            
            // In a real app, this would be an API call
            currentUser = {
                name: 'Demo User',
                email: email,
                phone: '9876543210',
                type: currentUserType,
                address: 'Sample Address, City, State',
                experience: 5,
                successRate: 85,
                communication: 4,
                behavior: 4
            };
            
            // Update UI with user data
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('profile-name').textContent = currentUser.name;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-phone').textContent = '+91 ' + currentUser.phone;
            
            // Update service provider stats if applicable
            if (currentUserType === 'service') {
                document.getElementById('exp-years').textContent = currentUser.experience;
                document.getElementById('success-rate').textContent = currentUser.successRate;
                document.getElementById('comm-rating').textContent = currentUser.communication;
                document.getElementById('behavior-rating').textContent = currentUser.behavior;
            }
            
            // Show dashboard
            showScreen(dashboard);
            showPage('profile');
        }

        function handleSignup() {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const phone = document.getElementById('signup-phone').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            
            // Simple validation
            if (!name || !email || !phone || !password || !confirmPassword) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            if (phone.length !== 10 || isNaN(phone)) {
                alert('Please enter a valid 10-digit phone number');
                return;
            }
            
            // Get user-specific data
            let address = '';
            let bankAccount = '';
            
            if (currentUserType === 'customer') {
                address = document.getElementById('signup-address').value;
            } else if (currentUserType === 'service') {
                address = document.getElementById('signup-address-service').value;
                bankAccount = document.getElementById('signup-bank').value;
            } else if (currentUserType === 'learner') {
                address = document.getElementById('signup-address-learner').value;
            } else if (currentUserType === 'mentor') {
                address = document.getElementById('signup-address-mentor').value;
                bankAccount = document.getElementById('signup-bank-mentor').value;
            }
            
            // In a real app, this would be an API call
            currentUser = {
                name: name,
                email: email,
                phone: phone,
                address: address,
                bankAccount: bankAccount,
                type: currentUserType,
                experience: 0,
                successRate: 0,
                communication: 0,
                behavior: 0
            };
            
            // Update UI with user data
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('profile-name').textContent = currentUser.name;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-phone').textContent = '+91 ' + currentUser.phone;
            
            // Show dashboard
            showScreen(dashboard);
            showPage('profile');
        }

        function handleLogout() {
            currentUser = null;
            showScreen(languageSelectionScreen);
        }

        function showPage(page) {
            // Update previous page
            if (page !== currentPage) {
                previousPage = currentPage;
            }
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => {
                p.classList.add('hidden');
            });
            // Show the requested page
            document.getElementById(`${page}-page`).classList.remove('hidden');
            currentPage = page;
        }

        function showReportModal(serviceType) {
            // Set the service type in the modal
            problemCategorySelect.value = serviceType;
            if (serviceType === 'other') {
                otherCategoryDiv.style.display = 'block';
            } else {
                otherCategoryDiv.style.display = 'none';
            }
            
            // Show the modal
            reportModal.classList.remove('hidden');
        }

        function convertTextToSpeech() {
            const text = document.getElementById('problem-description').value;
            if (!text) {
                alert('Please enter some text to convert to speech');
                return;
            }
            
            // In a real app, this would use a TTS API
            alert('Text to speech conversion would happen here. In a real app, this would use a TTS API.');
        }

        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        document.getElementById('location-display').textContent = 
                            `Current Location: ${lat.toFixed(6)}, ${lng.toFixed(6)}`;
                    },
                    (error) => {
                        alert('Unable to retrieve your location. Please try manual selection.');
                    }
                );
            } else {
                alert('Geolocation is not supported by this browser. Please try manual selection.');
            }
        }

        function openManualLocation() {
            // In a real app, this would open Google Maps
            alert('Manual location selection would open Google Maps here.');
            document.getElementById('location-display').textContent = 
                'Manual location selected (simulated)';
        }

        function submitReport() {
            const category = problemCategorySelect.value;
            const description = document.getElementById('problem-description').value;
            const location = document.getElementById('location-display').textContent;
            
            if (!description) {
                alert('Please describe your problem');
                return;
            }
            
            if (location === 'No location selected') {
                alert('Please select a location');
                return;
            }
            
            // In a real app, this would submit to a backend
            alert('Report submitted successfully! 50% payment would be processed.');
            reportModal.classList.add('hidden');
            
            // Update stats
            const reportsCount = document.getElementById('reports-count');
            reportsCount.textContent = parseInt(reportsCount.textContent) + 1;
        }

        function openEditProfile() {
            // Populate the edit form with current user data
            document.getElementById('edit-name').value = currentUser.name;
            document.getElementById('edit-email').value = currentUser.email;
            document.getElementById('edit-phone').value = currentUser.phone;
            document.getElementById('edit-address').value = currentUser.address || '';
            
            // Show service provider specific fields if applicable
            if (currentUserType === 'service') {
                document.getElementById('service-edit-fields').style.display = 'block';
                document.getElementById('edit-experience').value = currentUser.experience;
                document.getElementById('edit-success-rate').value = currentUser.successRate;
            } else {
                document.getElementById('service-edit-fields').style.display = 'none';
            }
            
            // Show the modal
            editProfileModal.classList.remove('hidden');
        }

        function saveProfile() {
            // Get updated values from the form
            const name = document.getElementById('edit-name').value;
            const email = document.getElementById('edit-email').value;
            const phone = document.getElementById('edit-phone').value;
            const address = document.getElementById('edit-address').value;
            
            // Update user object
            currentUser.name = name;
            currentUser.email = email;
            currentUser.phone = phone;
            currentUser.address = address;
            
            // Update service provider specific data if applicable
            if (currentUserType === 'service') {
                currentUser.experience = document.getElementById('edit-experience').value;
                currentUser.successRate = document.getElementById('edit-success-rate').value;
                
                // Update displayed stats
                document.getElementById('exp-years').textContent = currentUser.experience;
                document.getElementById('success-rate').textContent = currentUser.successRate;
            }
            
            // Update UI
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('profile-name').textContent = currentUser.name;
            document.getElementById('profile-email').textContent = currentUser.email;
            document.getElementById('profile-phone').textContent = '+91 ' + currentUser.phone;
            
            // Close the modal
            editProfileModal.classList.add('hidden');
            
            alert('Profile updated successfully!');
        }

        // Initialize the app
        updateLanguage();
    